<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>

    <title>BloWMind | Criar Usuários</title>

    <link href="../css/bootstrap.min.css" rel="stylesheet"/>
    <link href="../font-awesome/css/font-awesome.css" rel="stylesheet"/>

    <!-- Toastr style -->
    <link href="../css/plugins/toastr/toastr.min.css" rel="stylesheet"/>

    <!-- Gritter -->
    <link href="../js/plugins/gritter/jquery.gritter.css" rel="stylesheet"/>

    <link href="../css/animate.css" rel="stylesheet"/>
    <link href="../css/style.css" rel="stylesheet"/>

</head>

<body>
    <div id="wrapper">
        
        <!-- Menu left-->
      	<th:block th:replace="/panel/leftMenu :: leftMenu"/>
      	
      	<div id="page-wrapper" class="gray-bg">
	      	<!-- panel header-->
	      	<th:block th:replace="/panel/header :: header"/>
      	
      	
      <div class="wrapper wrapper-content animated fadeInRight">
       <div class="row">
            <div class="col-lg-12">
                <div class="ibox float-e-margins">	
      			<div class="row">
                <div class="col-lg-12">
                    <div class="ibox float-e-margins">
                        <div class="ibox-title">
                            <h5>Cadastro de usuários<small> Incluír usuários do sistema.</small></h5>
                        </div>
                        <div class="ibox-content">
                            <form class="form-horizontal" method="POST" th:object="${userDataVM}">
	                            
	                           		<div class="alert alert-success" th:text="${message}" th:if="${not #strings.isEmpty(message)}">
									</div>
		                            <div th:if="${#fields.hasAnyErrors()}">
										<div th:each="detailedError : ${#fields.detailedErrors()}">
										</div>
										<script th:inline="javascript">
										/*<![CDATA[*/
									
											var errors = /*[[${#fields.detailedErrors()}]]*/ null;
									    	
										/*]]>*/
										</script>
									</div> 
	                            
                                <div class="form-group">
                                	<label class="col-sm-2 control-label">Nome Completo:</label>
                                    <div class="col-sm-5" th:classappend="${#fields.hasErrors('name')} ? has-error">
                                    	<input type="text" th:field="*{name}" name="name" th:if="${userDataVM}" th:value="${userDataVM.name}" class="form-control"/>
                                    </div>
                                    <label class="col-sm-1 control-label">Tipo:</label>
                                    <div class="col-sm-4">
                                    	<select class="form-control m-b" name="role">
	                                        <option value="ROLE_USER">Usuário Comum</option>
	                                        <option value="ROLE_ADMIN">Usuário Administrador</option>
	                                        
                                   		</select>
                                    </div>
                                </div>
                                <div class="form-group">
                                	<label class="col-sm-2 control-label">Endereço de E-Mail:</label>
                                   		<div class="col-md-3" th:classappend="${#fields.hasErrors('email')} ? has-error">
                                   			<input type="text" th:field="*{email}" name="email" th:if="${userDataVM}" th:value="${userDataVM.email}" class="form-control"/> 
                                   			<span class="help-block m-b-none">Endereço de e-mail blowmind.</span>
                                    	</div>
                                    <label class="col-sm-1 control-label">Senha:</label>
                                    	<div class="col-md-2" th:classappend="${#fields.hasErrors('password')} ? has-error">
                                   			<input type="password" th:field="*{password}" name="password" class="form-control"/> 
                                    	</div>
                                    <label class="col-sm-2 control-label">Repita a senha:</label>
                                    	<div class="col-md-2" th:classappend="${#fields.hasErrors('password')} ? has-error">
                                   			<input type="password" name="re-password" class="form-control"/> 
                                    	</div>
                                </div>
                                  <div class="hr-line-dashed"></div>
                                <div class="form-group">
                                	<label class="col-sm-2 control-label">Data de Nascimento</label>
                                    <div class="col-md-2" th:classappend="${#fields.hasErrors('birthdate')} ? has-error">
                                    	<input type="text" th:field="*{birthdate}" name="birthdate" th:if="${userDataVM}" th:value="${userDataVM.birthdate}" class="form-control" data-mask="99/99/9999"/>
                                    </div>
                                    <label class="col-sm-1 control-label">Cpf</label>
                                    <div class="col-md-2" th:classappend="${#fields.hasErrors('document')} ? has-error">
                                    	<input type="text" th:field="*{document}" name="document" th:if="${userDataVM}" th:value="${userDataVM.document}" class="form-control" data-mask="999.999.999-99"/>
                                    </div>
                                    <label class="col-sm-1 control-label">País</label>
                                    <div class="col-md-4">
                                    	<select class="form-control m-b" th:if="${userDataVM}" name="cowntry">
                                    		<option th:value="${userDataVM.cowntry}" th:text="${userDataVM.cowntry}">Brasil</option>
	                                        <option value="Brasil">Brasil</option>
	                                        <option value="Canadá">Canadá</option>
	                                        <option value="Estádos Unidos">Estádos Unidos</option>
	                                        <option value="Alemanha">Alemanha</option>
	                                        <option value="Inglaterra">Inglaterra</option>
	                                        <option value="França">França</option>
	                                        <option value="Belgica">Belgica</option>
	                                        <option value="Chile">Chile</option>
	                                        <option value="Argentina">Argentina</option>
                                   		</select>
                                    </div>
                                </div>
                                <div class="form-group">
                                <label class="col-sm-2 control-label">Cep</label>
                                    <div class="col-md-2" th:classappend="${#fields.hasErrors('postal')} ? has-error">
                                    	<input type="text" th:field="*{postal}" name="postal" th:if="${userDataVM}" th:value="${userDataVM.postal}" class="form-control" data-mask="99.999-999"/>
                                    </div>
                                    <label class="col-sm-1 control-label">Estado</label>
                                    <div class="col-md-2" th:classappend="${#fields.hasErrors('state')} ? has-error">
                                    	<input type="text" th:field="*{state}" name="state" th:if="${userDataVM}" th:value="${userDataVM.state}" class="form-control" data-mask="aa"/>
                                    </div>
                                	<label class="col-sm-2 control-label">Cidade</label>
                                    <div class="col-md-3" th:classappend="${#fields.hasErrors('city')} ? has-error">
                                    	<input type="text" th:field="*{city}" name="city" th:if="${userDataVM}" th:value="${userDataVM.city}" class="form-control"/>
                                    </div>
                                </div>
                                <div class="form-group">
                                	<label class="col-sm-2 control-label">Rua</label>
                                    <div class="col-md-2" th:classappend="${#fields.hasErrors('street')} ? has-error">
                                    	<input type="text" th:field="*{street}" name="street" th:if="${userDataVM}" th:value="${userDataVM.street}" class="form-control"/>
                                    </div>
                                    <label class="col-sm-1 control-label" >Número</label>
                                    <div class="col-md-1" th:classappend="${#fields.hasErrors('number')} ? has-error">
                                    	<input type="text" th:field="*{number}" name="number" th:if="${userDataVM}" th:value="${userDataVM.number}" class="form-control"/>
                                    </div>
                                    <label class="col-sm-1 control-label">Bairro</label>
                                    <div class="col-md-2" th:classappend="${#fields.hasErrors('neighborhood')} ? has-error">
                                    	<input type="text" th:field="*{neighborhood}" name="neighborhood" th:if="${userDataVM}" th:value="${userDataVM.neighborhood}" class="form-control"/>
                                    </div>
                                    <label class="col-sm-1 control-label">Comp.</label>
                                    <div class="col-md-2">
                                    	<input type="text" name="complement" th:if="${userDataVM}" th:value="${userDataVM.complement}" class="form-control"/>
                                    </div>
                                </div>
                                <div class="form-group">
                                	<label class="col-sm-2 control-label">Telefone Fixo</label>
                                    <div class="col-md-2">
                                    	<input type="text" name="telephone" th:if="${userDataVM}" th:value="${userDataVM.telephone}" class="form-control" data-mask="(99) 9999-9999"/>
                                    </div>
                                    <label class="col-sm-2 control-label">Telefone Celular</label>
                                    <div class="col-md-2" th:classappend="${#fields.hasErrors('cellphone')} ? has-error">
                                    	<input type="text" th:field="*{cellphone}" name="cellphone" th:if="${userDataVM}" th:value="${userDataVM.cellphone}" class="form-control" data-mask="(99) 9 9999-9999"/>
                                    </div>
                                    <label class="col-sm-2 control-label">WhatsApp ?</label>
                                    <div class="col-md-2">
                                    	<select class="form-control m-b" th:field="*{whatsapp}" name="whatsapp">
                                    		<option th:value="${userDataVM.whatsapp}" th:text="${userDataVM.whatsapp}"></option>
	                                        <option value="true">Sim</option>
	                                        <option value="false">Não</option>
                                   		</select>
                                    </div>
                                </div>
                                <div class="form-group">
                                	<label class="col-sm-2 control-label">Cargo</label>
                                    <div class="col-sm-6" th:classappend="${#fields.hasErrors('position')} ? has-error">
                                    	<input type="text" th:field="*{position}" name="position" th:if="${userDataVM}"  th:value="${userDataVM.position}" class="form-control"/>
                                    </div>
                                     <label class="col-sm-1 control-label">Status</label>
                                    <div class="col-md-3">
                                    	<select class="form-control m-b" name="confirmed">
                                    		<option th:value="${userDataVM.confirmed}" th:text="${userDataVM.confirmed}"></option>
	                                        <option value="true">Ativo</option>
	                                        <option value="false">Inativo</option>
                                   		</select>
                                    </div>
                                </div>
                                <div class="hr-line-dashed"></div>
                                <div class="form-group">
                                    <div class="col-sm-4 col-sm-offset-2">
                                        <button class="btn btn-white" type="submit">Cancelar</button>
                                        <button class="btn btn-primary" id="submit" type="submit">Criar usuário</button>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
      	</div>
      	</div>
      	</div>
      	</div>
      	</div>

        <!-- small chat-->
      	<th:block th:replace="/panel/smallChat :: smallChat"/>
        
    </div>

    <!-- Mainly scripts -->
    <script src="../js/jquery-3.1.1.min.js"></script>
    <script src="../js/bootstrap.min.js"></script>
    <script src="../js/plugins/metisMenu/jquery.metisMenu.js"></script>
    <script src="../js/plugins/slimscroll/jquery.slimscroll.min.js"></script>

    <!-- Custom and plugin javascript -->
    <script src="../js/inspinia.js"></script>
    <script src="../js/plugins/pace/pace.min.js"></script>

    <!-- jQuery UI -->
    <script src="../js/plugins/jquery-ui/jquery-ui.min.js"></script>

    <!-- GITTER -->
    <script src="../js/plugins/gritter/jquery.gritter.min.js"></script>

    <!-- Sparkline -->
    <script src="../js/plugins/sparkline/jquery.sparkline.min.js"></script>

    <!-- Sparkline demo data  -->
    <script src="../js/demo/sparkline-demo.js"></script>

    <!-- ChartJS-->
    <script src="../js/plugins/chartJs/Chart.min.js"></script>

    <!-- Toastr -->
    <script src="../js/plugins/toastr/toastr.min.js"></script>
    
    <!-- Input Mask-->
    <script src="../js/plugins/jasny/jasny-bootstrap.min.js"></script>
    
    <!-- Toastr script -->
    <script src="../js/plugins/toastr/toastr.min.js"></script>
	<script>
	
		var message = "";
		if (errors){
			var field = errors[0]['fieldName'];
			for (var key in errors) {
				message += errors[key]['message'] + "<br/>";
			}
			 // Display a success toast, with a title
			 toastr['error'](message, 'Alerta');
			
		};
		
	</script>
    
</body>
</html>
